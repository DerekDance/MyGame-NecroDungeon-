from creatures import Hero
import random


class InventorySystem:
    def init(self):
        self.backpack_items = {
            "–∑–µ–ª—å–µ —Å–∏–ª—ã": "hero_potion_strength",
            "–∑–µ–ª—å–µ –ª–µ—á–µ–Ω–∏—è": "hero_potion_heal",
            "—Å–≤–∏—Ç–æ–∫ –∏—Å–∫—Ä" : "hero_scroll_of_sparks",
            "–∑–µ–ª—å–µ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∑–¥–æ—Ä–æ–≤—å—è" : "hero_potion_of_regen_hp"
        }

    # (1) –§—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä—é–∫–∑–∞–∫–∞
    def show_backpack(self, hero):

        backpack_phrases = [f"--- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–µ—à–∫–∞ –ø—É—Ç–Ω–∏–∫–∞ ---",
    "(üéí) –¢–æ, —á—Ç–æ –Ω–µ—Å—ë—à—å —Å —Å–æ–±–æ–π:",  
    "üìú –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É:",  
    "üñ§ –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å –ø—Ä–∏ —Ç–µ–±–µ:",  
    "(üéí) –ú–µ—à–æ–∫ –≥–µ—Ä–æ—è :",  
    "(üîÆ) –†–∏—á–∞—Ä–¥ —à–µ–ø—á–µ—Ç: ¬´–ü–æ—Å–º–æ—Ç—Ä–∏, —á—Ç–æ —É —Ç–µ–±—è –µ—Å—Ç—å...¬ª",  
    "‚öîÔ∏è –¢–≤–æ–π –¥–æ—Ä–æ–∂–Ω—ã–π –∞—Ä—Å–µ–Ω–∞–ª:",  
    "üì¶ –°–æ–∫—Ä–æ–≤–∏—â–∞ –∏ —Ä–µ—Å—É—Ä—Å—ã:",
     ]

        empty_backpack_phrases = ["–ú–µ—à–æ–∫ –ø—É—Å—Ç ‚Äî –¥–∞–∂–µ —Ç–µ–Ω–∏ –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å."  
    "–ù–∏—á–µ–≥–æ. –¢–æ–ª—å–∫–æ –ø—ã–ª—å –∏ –æ–±—Ä—ã–≤–∫–∏ –Ω–∞–¥–µ–∂–¥—ã."  
    "(üéí) –†–∏—á–∞—Ä–¥ –≤–∑–¥—ã—Ö–∞–µ—Ç: ¬´–¢—ã –≤—Å—ë –ø–æ—Ç—Ä–∞—Ç–∏–ª...¬ª"  
    "–ü—É—Å—Ç–æ—Ç–∞ ‚Äî —Ç–≤–æ–π –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø—É—Ç–Ω–∏–∫."  
    "–í–Ω—É—Ç—Ä–∏ ‚Äî –ª–∏—à—å —ç—Ö–æ —Ç–≤–æ–∏—Ö —Ä–µ—à–µ–Ω–∏–π."  
    "–ù–µ—á–µ–º –ª–µ—á–∏—Ç—å—Å—è. –ù–µ—á–µ–º –±–∏—Ç—å. –û—Å—Ç–∞–ª—Å—è —Ç–æ–ª—å–∫–æ —Ç—ã."  
    "–°–æ–∫—Ä–æ–≤–∏—â–∞ –∏—Å—á–µ–∑–ª–∏. –î–∞–∂–µ –∫—Ä—ã—Å—ã —É—à–ª–∏."  
    "–¢—ã ‚Äî —Ç–≤–æ—ë –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ—Ä—É–∂–∏–µ."  
    "–ú–∞–≥–∏—á–µ—Å–∫–∏–π –º–µ—à–æ–∫ –º–æ–ª—á–∏—Ç... –ø—É—Å—Ç."  
    "–†–µ—Å—É—Ä—Å—ã –∫–æ–Ω—á–∏–ª–∏—Å—å. –î–µ–π—Å—Ç–≤—É–π –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ."
     ]
        items = {
            "–ó–µ–ª—å–µ —Å–∏–ª—ã": hero.hero_potion_strength,
            "–ó–µ–ª—å–µ –ª–µ—á–µ–Ω–∏—è": hero.hero_potion_heal,
            "–°–≤–∏—Ç–æ–∫ –∏—Å–∫—Ä" : hero.hero_scroll_of_sparks,
            "–ó–µ–ª—å–µ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∑–¥–æ—Ä–æ–≤—å—è" : hero.hero_potion_of_regen_hp
        }
        menu_items = [random.choice(backpack_phrases)]

        for name, count in items.items():
            if count > 0:
                menu_items.append(f"{name}: {count}")
        if len(menu_items) == 1:
            menu_items.append(random.choice(empty_backpack_phrases))
        return "\n".join(menu_items)

    # (2) –§—É–Ω–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∑–µ–ª–∏–π
    def use_item(self, hero, hero_choice):
        result = ""

        if hero_choice == "1":
            if hero.hero_potion_strength > 0:
                hero.count_crit_attack += 1
                hero.hero_potion_strength -= 1
                result = "(üó°Ô∏è)  \u001b[36;1m–í—ã –≤—ã–ø–∏–ª–∏ –∑–µ–ª—å–µ —Å–∏–ª—ã.\u001b[0m"
            else:
                result = "–ù–µ—Ç –∑–µ–ª—å—è —Å–∏–ª—ã!"

        elif hero_choice == "2":
            if hero.hero_potion_heal > 0:
                hero.hero_health = min(hero.hero_health + 5, hero.hero_max_health)
                hero.hero_potion_heal -= 1
                result = "(‚ù§Ô∏è‚Äçü©π)  \u001b[32;1m–í—ã –≤—ã–ø–∏–ª–∏ –∑–µ–ª—å–µ –ª–µ—á–µ–Ω–∏—è.\u001b[0m"
            else:
                result = "–ù–µ—Ç –∑–µ–ª—å—è –ª–µ—á–µ–Ω–∏—è!"

        elif hero_choice == "3":
            if hero.hero_scroll_of_sparks > 0:
                hero.bullet_of_sparks += 1
                result = "(üìú)  \u001b[33;1m–ü—Ä–æ—á–∏—Ç–∞–≤ —Å–≤–∏—Ç–æ–∫ –Ω–∞ –≤–∞—à–µ–º —Ä—É–∂—å–µ –ø–æ—è–≤–∏–ª–∏—Å—å —Ä–∞—Å–∫–∞–ª–µ–Ω–Ω—ã–µ –∫—Ä–∞—Å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã.\u001b[0m"
            else:
                result = "–ù–µ—Ç —Å–≤–∏—Ç–∫–æ–≤ –∏—Å–∫—Ä!"

        elif hero_choice == "4":
            if hero.hero_potion_of_regen_hp > 0:
                hero.process_regen()
                hero.hero_potion_of_regen_hp -= 1
                result = "(üíä)  \u001b[35;1m –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–¥–æ—Ä–æ–≤—å—è.\u001b[0m"
            else:
                result = "–ù–µ—Ç –∑–µ–ª—å—è —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏!"

        elif hero_choice == "0":
            result = "–í—ã –∑–∞–∫—Ä—ã–ª–∏ —Ä—é–∫–∑–∞–∫"

        else:
            result = "–ù–µ—Ç —Ç–∞–∫–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞"

        return result


    # (3) –§—É–Ω–∫—Ü–∏—è –º–µ–Ω—é —Ä—é–∫–∑–∞–∫–∞
    def get_backpack_menu(self):
            return """(0) –ó–∞–∫—Ä—ã—Ç—å —Ä—é–∫–∑–∞–∫
    (1) –ó–µ–ª—å–µ —Å–∏–ª—ã - –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â—É—é –∞—Ç–∞–∫—É –≤ 2 —Ä–∞–∑–∞
    (2) –ó–µ–ª—å–µ –ª–µ—á–µ–Ω–∏—è - –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 5 –∑–¥–æ—Ä–æ–≤—å—è
    (3) –°–≤–∏—Ç–æ–∫ –∏—Å–∫—Ä - –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ç—Ä–µ–ª—è—Ç—å –¥—Ä–æ–±—å—é
    (4) –ó–µ–ª—å–µ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ - –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–¥–æ—Ä–æ–≤—å–µ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º""".strip()


    # (4) –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–∑–æ–≤–∞ –≤ main –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π - open_backpack(hero)
    def open_backpack(self, hero):
        print(f"_")  # –ù–∞—á–∞–ª–æ —Ñ–æ—Ä–º–∞—Ç–∞ –°–î–ï–õ–ê–¢–¨ –î–†–£–ì–û–ô –ü–û–°–õ–ï –û–ü–†–ï–î–ï–õ–ï–ù–ò–Ø –í –§–ê–ô–õ–ï format_system
        hero_choice = ""
        while hero_choice != "0":
            try:
                # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ä—é–∫–∑–∞–∫–∞
                print(self.show_backpack(hero))
                # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–µ–Ω—é –≤—ã–±–æ—Ä–∞
                print(self.get_backpack_menu())

                hero_choice = input("–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç: ").lower()

                if hero_choice == "0":
                    print("–†—é–∫–∑–∞–∫ –∑–∞–∫—Ä—ã—Ç.")
                    break
                else:
                    # –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç
                    result = self.use_item(hero, hero_choice)
                    print(result)

            except Exception as e:
                print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø—Ä–µ–¥–º–µ—Ç–∞: {e}")
                return False

        print(f"_")  # –ö–æ–Ω–µ—Ü —Ñ–æ—Ä–º–∞—Ç–∞ # –ö–æ–Ω–µ—Ü —Ñ–æ—Ä–º–∞—Ç–∞ –°–î–ï–õ–ê–¢–¨ –î–†–£–ì–û–ô –ü–û–°–õ–ï –û–ü–†–ï–î–ï–õ–ï–ù–ò–Ø –í –§–ê–ô–õ–ï format_system
        return True
